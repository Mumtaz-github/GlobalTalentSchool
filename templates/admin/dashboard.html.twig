{% extends 'base.html.twig' %}

{% block title %}Admin Dashboard - Global Talent School{% endblock %}

{% block body %}
<div style="background: linear-gradient(135deg, #198754 0%, #146c43 100%); padding: 60px 0; color: white;">
    <div class="container">
        <h1 class="display-5 fw-bold"><i class="fas fa-user-shield"></i> Admin Dashboard</h1>
        <p class="lead">Welcome back, {{ app.user.email }}</p>
    </div>
</div>

<section class="py-5">
    <div class="container">
        <!-- Quick Actions -->
        <div class="row g-3 mb-5">
            <div class="col-md-3">
                <a href="{{ path('admin_dashboard') }}" class="btn btn-lg w-100" style="background: #0d6efd; color: white;">
                    <i class="fas fa-book fa-2x mb-2"></i><br>
                    Manage Courses
                </a>
            </div>
            <div class="col-md-3">
                <a href="{{ path('app_faculty_index') }}" class="btn btn-lg w-100" style="background: #6f42c1; color: white;">
                    <i class="fas fa-chalkboard-teacher fa-2x mb-2"></i><br>
                    Manage Faculty
                </a>
            </div>
            <div class="col-md-3">
                <a href="{{ path('app_news_index') }}" class="btn btn-lg w-100" style="background: #20c997; color: white;">
                    <i class="fas fa-newspaper fa-2x mb-2"></i><br>
                    Manage News
                </a>
            </div>
            <div class="col-md-3">
                <a href="{{ path('app_inquiry_index') }}" class="btn btn-lg w-100" style="background: #fd7e14; color: white;">
                    <i class="fas fa-envelope fa-2x mb-2"></i><br>
                    View Inquiries
                </a>
            </div>
        </div>

        <!-- Statistics -->
        <div class="row g-4 mb-5">
            <div class="col-md-3">
                <div class="card text-center p-4" style="background: linear-gradient(135deg, #0d6efd 0%, #0a58ca 100%); color: white;">
                    <i class="fas fa-book fa-3x mb-3"></i>
                    <h2 class="display-4 mb-0">{{ totalCourses }}</h2>
                    <p class="mb-0">Courses</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center p-4" style="background: linear-gradient(135deg, #6f42c1 0%, #5a32a3 100%); color: white;">
                    <i class="fas fa-chalkboard-teacher fa-3x mb-3"></i>
                    <h2 class="display-4 mb-0">{{ totalFaculty }}</h2>
                    <p class="mb-0">Faculty</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center p-4" style="background: linear-gradient(135deg, #20c997 0%, #198754 100%); color: white;">
                    <i class="fas fa-newspaper fa-3x mb-3"></i>
                    <h2 class="display-4 mb-0">{{ totalNews }}</h2>
                    <p class="mb-0">News</p>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card text-center p-4" style="background: linear-gradient(135deg, #fd7e14 0%, #ca6510 100%); color: white;">
                    <i class="fas fa-envelope fa-3x mb-3"></i>
                    <h2 class="display-4 mb-0">{{ recentInquiries|length }}</h2>
                    <p class="mb-0">Inquiries</p>
                </div>
            </div>
        </div>

        <!-- Recent Inquiries -->
        <div class="card shadow">
            <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                <h4 class="mb-0"><i class="fas fa-inbox"></i> Recent Inquiries</h4>
                <a href="{{ path('app_inquiry_index') }}" class="btn btn-light btn-sm">View All</a>
            </div>
            <div class="card-body">
                {% if recentInquiries|length > 0 %}
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Type</th>
                                <th>Message</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for inquiry in recentInquiries %}
                            <tr>
                                <td>{{ inquiry.createdAt|date('M d, Y') }}</td>
                                <td>{{ inquiry.name }}</td>
                                <td><a href="mailto:{{ inquiry.email }}">{{ inquiry.email }}</a></td>
                                <td>
                                    <span class="badge bg-{{ inquiry.type == 'admission' ? 'primary' : 'info' }}">
                                        {{ inquiry.type|upper }}
                                    </span>
                                </td>
                                <td>{{ inquiry.message|slice(0, 40) }}...</td>
                                <td>
                                    <a href="{{ path('admin_inquiry_show', {id: inquiry.id}) }}" class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-eye"></i>
                                    </a>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                {% else %}
                <p class="text-center text-muted my-4">No inquiries yet.</p>
                {% endif %}
            </div>
        </div>
    </div>
</section>
{% endblock %}